GitHubなどで公開する際にそのまま使える、見やすくプロフェッショナルな `README.md` のテンプレートを作成しました。

このプロジェクトの「強み（AI活用、定量的評価、Dualカメラ対応）」が伝わるように構成しています。

---

# 柳原法 自動評価アプリ (Yanagihara Method Facial Palsy Evaluator)

Webブラウザ上で動作する、顔面神経麻痺の評価法「柳原法（40点法）」を支援するアプリケーションです。
Google MediaPipeのAI技術（Face Mesh）を使用し、顔のランドマークを検出することで、客観的かつ定量的な評価をサポートします。

> **Note**
> 現在は開発段階（Alpha版）であり、「安静時」の評価機能のみ実装されています。

## 📖 概要

従来の柳原法評価は、医師の視診による主観的な判断が含まれることがありました。本アプリは、画像解析によって**「左右差（mm）」や「角度のズレ」を数値化**し、あらかじめ設定された閾値に基づいて自動でスコアリングを行います。

患者自身による「セルフチェック」と、医師による「診察時の撮影」の両方に対応した設計になっています。

## ✨ 主な機能

1. **AIによる顔ランドマーク検出**
* MediaPipe Face Landmarkerを使用し、高精度に顔の部位を特定。
* 黒目の直径（平均 11.7mm）を基準に、ピクセル単位をミリメートルに自動換算。


2. **2つの撮影モード (Dual Camera Mode)**
* **インカメラ (患者用):** 鏡のように左右反転して表示・保存（セルフチェック）。
* **外カメラ (医師用):** 反転なしの正像で表示・保存（診察・記録用）。
* ボタン一つで即座に切り替え可能。


3. **自動水平補正 (Auto Tilt Correction)**
* 撮影時にスマホや顔が傾いていても、両目の位置を基準に画像を**自動で水平に回転補正**してから解析します。


4. **柳原法に基づくスコアリング**
* 現在は「安静時」の非対称性を評価（4点・2点・0点の3段階）。



## 🛠 評価ロジック (安静時)

黒目の直径を `11.7mm` と仮定し、以下の基準で減点方式の判定を行います。

| 評価部位 | 計測内容 | 4点 (正常) | 2点 (軽度麻痺) | 0点 (高度麻痺) |
| --- | --- | --- | --- | --- |
| **目** | 目尻の高さの左右差 | < 2.0 mm | 2.0 - 5.0 mm | ≥ 5.0 mm |
| **口** | 口角の高さの左右差 | < 3.0 mm | 3.0 - 6.0 mm | ≥ 6.0 mm |
| **人中** | 垂直方向からの傾き | < 10° | 10° - 20° | ≥ 20° |

## 🚀 使い方

1. アプリを起動し、「安静時」ボタンを選択します。
2. 「カメラを起動する」を押し、ガイド枠（緑色）に顔を合わせます。
* 必要に応じて右上の「📷 切替」ボタンでカメラを変更します。


3. 「撮影・解析」ボタンを押すと、3秒のカウントダウン後に撮影されます。
4. 解析結果（画像、計測値、スコア）が表示されます。

## 💻 技術スタック

* **Frontend:** HTML5, CSS3, JavaScript (ES6 Modules)
* **AI/ML:** Google MediaPipe Tasks Vision (Face Landmarker)
* **Target:** Mobile & Desktop Browsers (Chrome, Safari, Edge)

## 📂 ディレクトリ構成

```text
.
├── index.html      # エントリーポイント
├── css/
│   └── style.css   # スタイルシート
└── js/
    ├── main.js     # メインロジック (カメラ制御、UI操作)
    ├── utils.js    # ユーティリティ (単位変換など)
    └── modules/
        └── eval_rest.js  # 安静時評価クラス

```

## ⚠️ 免責事項 (Disclaimer)

* 本アプリケーションは開発中のプロトタイプであり、医療機器ではありません。
* 表示されるスコアや計測値はあくまで参考値であり、医師の診断を代替するものではありません。
* 本アプリの使用によって生じた損害等について、開発者は一切の責任を負いません。

## 📅 更新履歴

* **2026/01/15**: 安静時評価の実装、外カメラ対応、自動補正機能の追加。

---